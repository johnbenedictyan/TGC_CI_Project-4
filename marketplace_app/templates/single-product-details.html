{% extends "layout.html" %}
{% load static %}
{% block single_product_details_area_section %}
<!-- ##### Single Product Details Area Start ##### -->
<section class="single_product_details_area d-flex align-items-center">

    <!-- Single Product Thumb -->
    <div class="single_product_thumb clearfix">
        <div class="product_thumbnail_slides owl-carousel">
            <img src="img/product-img/product-big-1.jpg" alt="">
            <img src="img/product-img/product-big-2.jpg" alt="">
            <img src="img/product-img/product-big-3.jpg" alt="">
        </div>
    </div>

    <!-- Single Product Description -->
    <div class="single_product_desc clearfix">
        <span>{{requested_listing.seller}}</span>
        <a href="cart.html">
            <h2>{{requested_listing.name}}</h2>
        </a>
        <p class="product-price">${{requested_listing.price}}</p>
        <p class="product-desc">{{requested_listing.description}}</p>

        <!-- Form -->
        <form class="cart-form clearfix" method="post">
            <!-- Select Box -->
            <div class="select-box d-flex mt-50 mb-30">
                <select name="select" id="productSize" class="mr-5">
                    <option value="value">Size: XL</option>
                    <option value="value">Size: X</option>
                    <option value="value">Size: M</option>
                    <option value="value">Size: S</option>
                </select>
                <select name="select" id="productColor">
                    <option value="value">Color: Black</option>
                    <option value="value">Color: White</option>
                    <option value="value">Color: Red</option>
                    <option value="value">Color: Purple</option>
                </select>
            </div>
            <!-- Cart & Favourite Box -->
            <div class="cart-fav-box d-flex align-items-center">
                <!-- Cart -->
                <button type="button" id="listing_buy_button" value="5" class="btn essence-btn">Buy</button>
                
                {% if user_has_liked_this_post == True %}
                <div class="product-favourite ml-4" data-listing-id="{{requested_listing.id}}">
                    <a href="#" class="favme fa fa-heart like_icon active"></a>
                </div>
                {% else %}
                <div class="product-favourite ml-4" data-listing-id="{{requested_listing.id}}">
                    <a href="#" class="favme fa fa-heart like_icon"></a>
                </div>
                {% endif %}
            </div>
        </form>
    </div>
</section>
<!-- ##### Single Product Details Area End ##### -->
{% endblock %}
{% block page_specific_head_section %}
<script src="https://ucarecdn.com/libs/widget/3.x/uploadcare.full.min.js"></script>
<script src="https://ucarecdn.com/libs/widget-tab-effects/1.x/uploadcare.tab-effects.js"></script>
<script>
  uploadcare.registerTab('preview', uploadcareTabEffects)
</script>
{{form.media}}
{% endblock %}
{% block page_specific_js %}
<script type="text/javascript">
/* global $ */
/* global axios */
    $(function(){
        $(".product-favourite").on("click",".like_icon",function(){
            let base_url = window.location.href;
            let listing_id = $(this).parent().data("listing-id");
            axios.get(base_url+"listing/single/"+listing_id.toString()+"/favourite/", {
                    params: {
                        listing_id:listing_id
                    }
                })
                .then(function(response) {
                    console.log(response);
                })
                .catch(function(error) {
                    console.log(error);
                });
            });
    });
</script>
{% endblock %}